name: docker-compose-actions-workflow
on: push
jobs:
  test:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v2
      - name: create .env file
        run: cp env.example .env
      - name: Build the stack
        run: docker-compose up -d
      - name: load .env
        run: source .env
      - name: Test
        run: docker run --rm --network container:docker-streamingriver_db_1 mariadb mysql -hdb -uroot -p${MARIADB_ROOT_PASSWORD} -e "select 1;"
